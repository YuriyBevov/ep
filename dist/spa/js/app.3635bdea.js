(function(e){function t(t){for(var n,o,i=t[0],c=t[1],l=t[2],d=0,u=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&u.push(s[o][0]),s[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);m&&m(t);while(u.length)u.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,o=1;o<a.length;o++){var i=a[o];0!==s[i]&&(n=!1)}n&&(r.splice(t--,1),e=c(c.s=a[0]))}return e}var n={},o={2:0},s={2:0},r=[];function i(e){return c.p+"js/"+({0:"chunk-common"}[e]||e)+"."+{0:"9c0d12bb",3:"e7cd74ee",4:"9c9f637e",5:"7b5f0b0c",6:"5924181a",7:"3c3ebb60",8:"62740e5c",9:"14636656",10:"980a27b9",11:"ddcced5a",12:"7699ddfc",13:"a66443ab",14:"d21d3d23",15:"45c98b89",16:"78baaa48",17:"aebe721c",18:"e094158f"}[e]+".js"}function c(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(e){var t=[],a={0:1,3:1,4:1,5:1};o[e]?t.push(o[e]):0!==o[e]&&a[e]&&t.push(o[e]=new Promise((function(t,a){for(var n="css/"+({0:"chunk-common"}[e]||e)+"."+{0:"a9f14dc0",3:"02daecaf",4:"fc417d7f",5:"02daecaf",6:"31d6cfe0",7:"31d6cfe0",8:"31d6cfe0",9:"31d6cfe0",10:"31d6cfe0",11:"31d6cfe0",12:"31d6cfe0",13:"31d6cfe0",14:"31d6cfe0",15:"31d6cfe0",16:"31d6cfe0",17:"31d6cfe0",18:"31d6cfe0"}[e]+".css",s=c.p+n,r=document.getElementsByTagName("link"),i=0;i<r.length;i++){var l=r[i],d=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(d===n||d===s))return t()}var u=document.getElementsByTagName("style");for(i=0;i<u.length;i++){l=u[i],d=l.getAttribute("data-href");if(d===n||d===s)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var n=t&&t.target&&t.target.src||s,r=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=n,delete o[e],m.parentNode.removeChild(m),a(r)},m.href=s;var p=document.getElementsByTagName("head")[0];p.appendChild(m)})).then((function(){o[e]=0})));var n=s[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,a){n=s[e]=[t,a]}));t.push(n[2]=r);var l,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=i(e);var u=new Error;l=function(t){d.onerror=d.onload=null,clearTimeout(m);var a=s[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+n+": "+o+")",u.name="ChunkLoadError",u.type=n,u.request=o,a[1](u)}s[e]=void 0}};var m=setTimeout((function(){l({type:"timeout",target:d})}),12e4);d.onerror=d.onload=l,document.head.appendChild(d)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(a,n,function(t){return e[t]}.bind(null,n));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var m=d;r.push([0,1]),a()})({0:function(e,t,a){e.exports=a("2f39")},"2f39":function(e,t,a){"use strict";a.r(t);a("5319"),a("7d6e"),a("e54f"),a("985d"),a("31cd");var n=a("2b0e"),o=a("1f91"),s=a("42d2"),r=a("b178");n["a"].use(r["b"],{config:{},lang:o["a"],iconSet:s["a"]});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"q-app"}},[a("router-view"),a("Loader",{attrs:{loadingState:e.loadingState}}),a("ServerAnswerModal",{attrs:{modalText:e.serverAnswerData.message,status:e.serverAnswerData.isOpened}})],1)},c=[],l=a("2f62"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-inner-loading",{attrs:{showing:this.$props.loadingState}},[a("q-spinner-gears",{attrs:{size:"50px",color:"primary"}})],1)},u=[],m={name:"Loader",props:{loadingState:{type:Boolean,default:!0}}},p=m,f=(a("f488"),a("2877")),h=Object(f["a"])(p,d,u,!1,null,null,null),E=h.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{attrs:{persistent:""},model:{value:e.isOpened,callback:function(t){e.isOpened=t},expression:"isOpened"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("span",{staticClass:"q-ml-sm"},[e._v(e._s(this.$props.modalText))])]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Ок",color:"primary"},on:{click:function(t){return e.resetModalState()}}})],1)],1)],1)},_=[],S={props:{status:{type:Boolean},modalText:{type:String},serverAnswerStatus:{type:Number}},data(){return{isOpened:!1,text:""}},methods:{...Object(l["b"])("common",["SET_SERVER_ANSWER_MODAL"]),resetModalState(){this.SET_SERVER_ANSWER_MODAL({msg:"",isOpened:!1})}},watch:{status:function(e,t){this.isOpened=e},modalText:function(e,t){this.text=e}}},g=S,A=Object(f["a"])(g,T,_,!1,null,null,null),L=A.exports,b={name:"App",components:{Loader:E,ServerAnswerModal:L},methods:{...Object(l["b"])("init",["INIT_APP"]),initApp(){this.INIT_APP()}},computed:{...Object(l["c"])("common",["loadingState","serverAnswerData"])},created(){this.initApp()}},v=b,N=Object(f["a"])(v,i,c,!1,null,null,null),O=N.exports,k=a("bc3a"),I=a.n(k),y=a("4328"),w=a.n(y);I.a.defaults.headers.post["Content-Type"]="application/json;charset=utf-8",I.a.defaults.headers.post["Access-Control-Allow-Origin"]="*",I.a.defaults.headers.get["Content-Type"]="application/json;charset=utf-8",I.a.defaults.headers.get["Access-Control-Allow-Origin"]="*",console.log(I.a.defaults.headers);const R=I.a.create({paramsSerializer:e=>w.a.stringify(e,{arrayFormat:"repeat"}),baseURL:"http://5.23.54.158/"});n["a"].prototype.$axios=R;const C={CHANGE_LOADING_STATE({commit:e},t){e("SET_LOADING_STATE",t)},SET_SERVER_ANSWER_MODAL({commit:e},t){e("FILL_SERVER_ANSWER_STATE",t)}},D={SET_LOADING_STATE(e,t){e.isLoading=t},FILL_SERVER_ANSWER_STATE(e,t){e.serverAnswer={message:t.message,isOpened:t.isOpened}}},G={isLoading:!0,serverAnswer:{message:"",isOpened:!1}},P={loadingState:e=>e.isLoading,serverAnswerData:e=>e.serverAnswer};var j={namespaced:!0,actions:C,mutations:D,state:G,getters:P};a("a79d");const U={INIT_APP({commit:e,dispatch:t}){t("common/CHANGE_LOADING_STATE",!0,{root:!0}),t("user/AUTHENTICATION",{},{root:!0}),t("department/GET_DEPARTMENT_LIST",{},{root:!0}),t("user/GET_USER_LIST",{},{root:!0}),R.get("/init/init_app").then((e=>{console.log(e.data)})).catch((e=>console.log(e))).finally((()=>{t("common/CHANGE_LOADING_STATE",!1,{root:!0})}))},CHANGE_LOADING_STATE({commit:e},t){e("SET_LOADING_STATE",t)}},x={},M={},H={};var V={namespaced:!0,actions:U,mutations:x,state:M,getters:H};const q={},W={},F={},$={};var K={namespaced:!0,state:q,mutations:W,actions:F,getters:$};const z={userList:[],activeUser:{}},B={SET_ACTIVE_USER(e,t){e.activeUser=t},SET_USER_LIST(e,t){e.userList=t}},J={LOGIN({commit:e,dispatch:t},a){R.post("user/login",a).then((a=>{localStorage.setItem("token",a.data.token),t("GET_USER_LIST"),e("SET_ACTIVE_USER",a.data.user)})).then((e=>{this.$router.push("/")})).catch((e=>console.log(e)))},LOGOUT({commit:e}){delete R.defaults.headers.common["Authorization"],localStorage.removeItem("token"),e("SET_ACTIVE_USER",{}),this.$router.push("/login")},AUTHENTICATION({commit:e,dispatch:t}){R.defaults.headers.common["Authorization"]=localStorage.getItem("token"),R.get("/auth/auth").then((a=>{console.log("auth ok"),e("SET_ACTIVE_USER",a.data.user),t("REFRESH_TOKEN",a.data.token)})).catch((e=>{console.log("auth not"),localStorage.removeItem("token"),this.$router.push("/login")}))},REFRESH_TOKEN({dispatch:e},t){localStorage.setItem("token",t),setTimeout((()=>{e("USER_AUTHENTICATION")}),144e5)},CREATE_USER({commit:e,dispatch:t},a){t("common/CHANGE_LOADING_STATE",!0,{root:!0}),R.post("user/add_user",a).then((e=>{t("GET_USER_LIST")})).catch((e=>console.log(e))).finally((()=>{t("common/CHANGE_LOADING_STATE",!1,{root:!0})}))},GET_USER_LIST({commit:e}){R.get("user/get_users").then((t=>{e("SET_USER_LIST",t.data)})).catch((e=>console.log(e)))}},Q={userList:e=>e.userList,activeUser:e=>e.activeUser,currentOrdinalNumber:e=>e.userList.length?e.userList[e.userList.length-1].ordinalNumber+1:null,roles:e=>e.activeUser?e.activeUser.roles:null};var X={namespaced:!0,state:z,mutations:B,actions:J,getters:Q};function Y(e,t,a){e.forEach((e=>{t.forEach((t=>{e._id===t._id&&(e[a]=t[a])}))}))}const Z={departmentList:[]},ee={SET_DEPARTMENTS_LIST(e,t){e.departmentList=t}},te={GET_DEPARTMENT_LIST({commit:e}){R.get("departments/get_departments").then((t=>{e("SET_DEPARTMENTS_LIST",t.data.departments)})).catch((e=>console.log(e)))},CREATE_DEPARTMENT({commit:e,dispatch:t},a){t("common/CHANGE_LOADING_STATE",!0,{root:!0}),R.post("departments/create_department",a).then((e=>{t("GET_DEPARTMENT_LIST"),console.log("ok",e),t("common/SET_SERVER_ANSWER_MODAL",{message:e.data.message,isOpened:!0},{root:!0})})).catch((e=>{console.log("err",e),t("common/SET_SERVER_ANSWER_MODAL",{message:e.response.data.message,isOpened:!0},{root:!0})})).finally((()=>{t("common/CHANGE_LOADING_STATE",!1,{root:!0})}))}},ae={departmentList:(e,{},t)=>{let a=t.user.userList,n=t.task.taskList;return e.departmentList.forEach((e=>{e.members&&Y(e.members,a,"fullName"),e.heads&&Y(e.heads,a,"fullName"),e.tasks&&Y(e.tasks,n,"title")})),e.departmentList}};var ne={namespaced:!0,state:Z,mutations:ee,actions:te,getters:ae};const oe=[{id:"1",title:"AМ на большевиков",description:"Делаем большой магазин под ключ",projectGroup:{id:"1",name:"АМ"},tasks:[{id:"1",id:"2"}],members:[{id:"2"},{id:"3"}],master:{id:"2"},created:{by:{id:"2"},date:new Date},exp:new Date,priority:7,status:"inWork"},{id:"2",title:"ЛекОптТорг на петроградке",description:"Вешаем вывеску и делаем интерьер",projectGroup:{id:"2",name:"ЛекОптТорг"},tasks:[{id:"3",id:"5"}],members:[{id:"1"},{id:"3"}],master:{id:"3"},created:{by:{id:"1"},date:new Date},exp:new Date,priority:7,status:"isDone"}],se={projectList:[]},re={SET_PROJECT_LIST(e,t){e.projectList=t}},ie={GET_PROJECT_LIST({commit:e}){e("SET_PROJECT_LIST",oe)}},ce={projectList:(e,{},t)=>{function a(e,t,a){e.forEach((e=>{t.forEach((t=>{e.id===t.id&&(e[a]=t[a])}))}))}let n=t.task.taskList,o=t.user.userList;return e.projectList.forEach((e=>{a(e.tasks,n,"title"),a(e.members,o,"fullName"),e.master.fullName=o.find((t=>t.id===e.master.id)).fullName,e.created.by.fullName=o.find((t=>t.id===e.created.by.id)).fullName,e.statusDesc="isOpened"===e.status?"Открытая задача":"inWork"===e.status?"В работе":"isFrozen"===e.status?"Приостановлена":"isDone"===e.status?"Выполнена":"isClosed"===e.status?"Закрыта":null})),e.projectList}};var le={namespaced:!0,state:se,mutations:re,actions:ie,getters:ce};const de={taskList:[]},ue={FILL_TASK_LIST(e,t){e.taskList=t}},me={GET_TASK_LIST({commit:e}){R.get("task/get_tasks").then((t=>{e("FILL_TASK_LIST",t.data)})).catch((e=>console.log(e)))},CREATE_TASK({commit:e,dispatch:t},a){t("common/CHANGE_LOADING_STATE",!0,{root:!0}),R.post("task/add_task",a).then((e=>{t("GET_TASK_LIST")})).catch((e=>console.log(e))).finally((()=>{t("common/CHANGE_LOADING_STATE",!1,{root:!0})}))}},pe={taskList:(e,{},t)=>{const a=t.user.userList;return e.taskList.forEach((e=>{e.members&&Y(e.members,a,"fullName"),e.performers&&Y(e.performers,a,"fullName"),e.master&&(e.master.fullName=a.find((t=>t._id===e.master._id)).fullName)})),e.taskList},activeUserTasks:(e,{},t)=>{let a=t.user.activeUser;return e.taskList.filter((e=>e.members?e.members.find((e=>e._id===a._id)):null))},openedTasks:e=>e.taskList.filter((e=>"isOpened"===e.status)),closedTasks:e=>e.taskList.filter((e=>"isClosed"===e.status)),frozenTasks:e=>e.taskList.filter((e=>"isFrozen"===e.status)),doneTasks:e=>e.taskList.filter((e=>"isDone"===e.status)),inWorkTasks:e=>e.taskList.filter((e=>"inWork"===e.status))};var fe={namespaced:!0,state:de,mutations:ue,actions:me,getters:pe};n["a"].use(l["a"]);const he=new l["a"].Store({modules:{common:j,init:V,auth:K,user:X,department:ne,project:le,task:fe},strict:!1});var Ee=function(){return he},Te=a("8c4f");a("ddb0");const _e=[{path:"/",component:()=>a.e(7).then(a.bind(null,"713b")),children:[{path:"",component:()=>Promise.all([a.e(0),a.e(5)]).then(a.bind(null,"3635"))},{path:"/all_tasks",component:()=>Promise.all([a.e(0),a.e(18)]).then(a.bind(null,"eeea"))},{path:"/task/:id",component:()=>Promise.all([a.e(0),a.e(4)]).then(a.bind(null,"7c3b"))},{path:"/opened_tasks",component:()=>Promise.all([a.e(0),a.e(17)]).then(a.bind(null,"3709"))},{path:"/archived_tasks",component:()=>a.e(15).then(a.bind(null,"260b"))},{path:"/done_tasks",component:()=>Promise.all([a.e(0),a.e(3)]).then(a.bind(null,"eb52"))},{path:"/create_user",component:()=>a.e(11).then(a.bind(null,"fd78"))},{path:"/users",component:()=>a.e(14).then(a.bind(null,"edf7"))},{path:"/departments",component:()=>a.e(13).then(a.bind(null,"a90d"))},{path:"/create_department",component:()=>Promise.all([a.e(0),a.e(10)]).then(a.bind(null,"9687"))},{path:"/department/:id",component:()=>Promise.all([a.e(0),a.e(12)]).then(a.bind(null,"fa2a"))},{path:"/create_task",component:()=>Promise.all([a.e(1),a.e(0),a.e(8)]).then(a.bind(null,"9379"))}]},{path:"/",component:()=>a.e(6).then(a.bind(null,"21f0")),children:[{path:"/login",name:"login",component:()=>a.e(16).then(a.bind(null,"d37f"))}]},{path:"*",component:()=>a.e(9).then(a.bind(null,"e51e"))}];var Se=_e;n["a"].use(Te["a"]);var ge=function(){const e=new Te["a"]({scrollBehavior:()=>({x:0,y:0}),routes:Se,mode:"hash",base:""});return e},Ae=async function(){const e="function"===typeof Ee?await Ee({Vue:n["a"]}):Ee,t="function"===typeof ge?await ge({Vue:n["a"],store:e}):ge;e.$router=t;const a={router:t,store:e,render:e=>e(O),el:"#q-app"};return{app:a,store:e,router:t}};const Le="";async function be(){const{app:e,store:t,router:a}=await Ae();let o=!1;const s=e=>{o=!0;const t=Object(e)===e?a.resolve(e).route.fullPath:e;window.location.href=t},r=window.location.href.replace(window.location.origin,""),i=[void 0];for(let l=0;!1===o&&l<i.length;l++)if("function"===typeof i[l])try{await i[l]({app:e,router:a,store:t,Vue:n["a"],ssrContext:null,redirect:s,urlPath:r,publicPath:Le})}catch(c){return c&&c.url?void(window.location.href=c.url):void console.error("[Quasar] boot error:",c)}!0!==o&&new n["a"](e)}be()},"31cd":function(e,t,a){},"976f":function(e,t,a){},f488:function(e,t,a){"use strict";a("976f")}});