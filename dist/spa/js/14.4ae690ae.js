(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{"2fea":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user-info"},[s("div",[s("q-card",[s("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[s("q-tab",{attrs:{name:"options",label:"Данные пользователя"}}),s("q-tab",{attrs:{name:"tasks",label:"Текущие задачи"}}),s("q-tab",{attrs:{name:"permits",label:"Разрешения"}})],1),s("q-separator"),s("q-tab-panels",{attrs:{animated:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[s("q-tab-panel",{attrs:{name:"options"}},[s("UserDataEdit",{attrs:{users:this.userList,departments:this.departmentList},on:{updateUser:e.updateUserData,deleteUser:e.deleteUser}})],1),s("q-tab-panel",{attrs:{name:"tasks"}},[s("UserTasksEdit")],1),s("q-tab-panel",{attrs:{name:"permits"}},[s("UserPermitsEdit")],1)],1)],1)],1)])},i=[],r=s("2f62"),n=s("0727"),l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{},[s("div",{staticClass:"flex items-center q-mb-lg"},[s("div",{staticClass:"q-mr-lg"},[s("q-toggle",{attrs:{disable:!this.isDataSaved,color:"green"},model:{value:e.isUserEditing,callback:function(t){e.isUserEditing=t},expression:"isUserEditing"}}),s("span",[e._v("Открыть для редактирования")])],1),s("q-btn",{attrs:{label:"удалить",color:"negative"},on:{click:function(t){return e.deleteUser()}}})],1),s("div",{staticClass:"q-mb-lg"},[s("q-input",{staticClass:"q-mb-md",attrs:{filled:"",hint:"LogIn",disable:!this.isUserEditing},on:{input:function(t){return e.setChangeState()}},model:{value:e.userData.login,callback:function(t){e.$set(e.userData,"login",t)},expression:"userData.login"}}),s("q-input",{directives:[{name:"show",rawName:"v-show",value:!this.isUserEditing,expression:"!this.isUserEditing"}],staticClass:"q-mb-md",attrs:{filled:"",hint:"Имя пользователя",disable:""},on:{input:function(t){return e.setChangeState()}},model:{value:e.userData.fullName,callback:function(t){e.$set(e.userData,"fullName",t)},expression:"userData.fullName"}}),s("q-input",{directives:[{name:"show",rawName:"v-show",value:this.isUserEditing,expression:"this.isUserEditing"}],staticClass:"q-mb-md",attrs:{filled:"",hint:"Имя","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Поле не может быть пустым"}]},on:{input:function(t){return e.setChangeState()}},model:{value:e.userData.name,callback:function(t){e.$set(e.userData,"name",t)},expression:"userData.name"}}),s("q-input",{directives:[{name:"show",rawName:"v-show",value:this.isUserEditing,expression:"this.isUserEditing"}],staticClass:"q-mb-md",attrs:{filled:"",hint:"Фамилия","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Поле не может быть пустым"}]},on:{input:function(t){return e.setChangeState()}},model:{value:e.userData.surname,callback:function(t){e.$set(e.userData,"surname",t)},expression:"userData.surname"}}),s("q-input",{staticClass:"q-mb-md",attrs:{filled:"",hint:"Телефон",disable:!this.isUserEditing,mask:"+7(###)###-##-##","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Поле не может быть пустым"},function(e){return e.length>15||"* Проверьте правильность указаного номера"}]},on:{input:function(t){return e.setChangeState()}},model:{value:e.userData.phone,callback:function(t){e.$set(e.userData,"phone",t)},expression:"userData.phone"}}),s("q-input",{staticClass:"q-mb-md",attrs:{filled:"",hint:"E-mail",disable:!this.isUserEditing},on:{input:function(t){return e.setChangeState()}},model:{value:e.userData.email,callback:function(t){e.$set(e.userData,"email",t)},expression:"userData.email"}}),s("q-input",{directives:[{name:"show",rawName:"v-show",value:!this.isUserEditing,expression:"!this.isUserEditing"}],staticClass:"q-mb-md",attrs:{filled:"",hint:"Роль(и)",disable:!this.isUserEditing},on:{input:function(t){return e.setChangeState()}},model:{value:e.userData.roles,callback:function(t){e.$set(e.userData,"roles",t)},expression:"userData.roles"}}),s("q-select",{directives:[{name:"show",rawName:"v-show",value:this.isUserEditing,expression:"this.isUserEditing"}],staticClass:"q-mb-md",attrs:{filled:"",multiple:"",options:["СуперАдмин","Админ","Пользователь","Гость"],hint:"Роль(и)","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Поле не может быть пустым"}]},on:{input:function(t){return e.setChangeState()}},model:{value:e.userData.roles,callback:function(t){e.$set(e.userData,"roles",t)},expression:"userData.roles"}}),s("q-select",{staticClass:"q-mb-md",attrs:{filled:"",hint:"Отдел",options:e.getDepartments(),disable:!this.isUserEditing,"lazy-rules":"",rules:[function(e){return e&&e.length>0||"Поле не может быть пустым"}]},on:{input:function(t){return e.setChangeState()}},model:{value:e.userData.department,callback:function(t){e.$set(e.userData,"department",t)},expression:"userData.department"}}),s("q-checkbox",{directives:[{name:"show",rawName:"v-show",value:"Без отдела"!==e.userData.department,expression:"userData.department !== 'Без отдела'"}],staticClass:"q-mb-md",attrs:{disable:!this.isUserEditing,filled:"",label:"Руководитель отдела"},on:{input:function(t){return e.setChangeState()}},model:{value:e.userData.isDepartmentHead,callback:function(t){e.$set(e.userData,"isDepartmentHead",t)},expression:"userData.isDepartmentHead"}})],1),s("div",{staticClass:"flex"},[s("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.isFieldsDirty,expression:"isFieldsDirty"}],staticClass:"q-mr-sm",attrs:{label:"Сохранить изменения",color:"positive"},on:{click:function(t){return e.updateUser()}}}),s("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.isFieldsDirty,expression:"isFieldsDirty"}],attrs:{label:"Отмена",color:"negative"},on:{click:function(t){return e.resetChanges()}}})],1)])},u=[],o=(s("ddb0"),{props:{users:{type:Array},departments:{type:Array}},data(){return{isFieldsDirty:!1,isDataSaved:!0,isUserEditing:!1,userData:{}}},methods:{setUserData(){if(this.$props.users.length){this.userData=Object.assign({},this.$props.users.find((e=>e._id===this.$route.params.id)));let e=[];this.userData.roles.forEach((t=>{e.push(Object(n["a"])(t))})),this.userData.roles=e}},getDepartments(){let e=[];return this.$props.departments.forEach((t=>{e.push(t.title)})),["Без отдела",...e]},setChangeState(){this.isDataSaved&&!this.isFieldsDirty&&(this.isDataSaved=!1,this.isFieldsDirty=!0)},resetChanges(){this.setUserData(),this.isDataSaved=!0,this.isFieldsDirty=!1,this.isUserEditing=!1},deleteUser(){this.$emit("deleteUser",this.userData._id)},updateUser(){"Без отдела"===this.userData.department&&(this.userData.isDepartmentHead=!1),this.$emit("updateUser",this.userData)}},mounted(){this.setUserData()},watch:{users:function(){this.setUserData()}}}),d=o,c=s("2877"),m=Object(c["a"])(d,l,u,!1,null,null,null),p=m.exports,h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._v("\n    user permits edit\n")])},b=[],D={},f=Object(c["a"])(D,h,b,!1,null,null,null),v=f.exports,g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._v("\n    user tasks edit\n")])},U=[],q={},E=Object(c["a"])(q,g,U,!1,null,null,null),w=E.exports,C={data(){return{tab:"options"}},components:{UserDataEdit:p,UserPermitsEdit:v,UserTasksEdit:w},computed:{...Object(r["c"])("user",["userList"]),...Object(r["c"])("department",["departmentList"])},methods:{updateUserData(e){let t=Object.assign({},e),s=[];t.roles.forEach((e=>{s.push(Object(n["a"])(e))})),t.roles=s,console.log("UPDATE:",t)},deleteUser(e){console.log(e)}}},x=C,k=Object(c["a"])(x,a,i,!1,null,null,null);t["default"]=k.exports}}]);