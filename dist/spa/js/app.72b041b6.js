(function(e){function t(t){for(var a,o,i=t[0],c=t[1],l=t[2],d=0,u=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&u.push(r[o][0]),r[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);m&&m(t);while(u.length)u.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,o=1;o<n.length;o++){var i=n[o];0!==r[i]&&(a=!1)}a&&(s.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},o={2:0},r={2:0},s=[];function i(e){return c.p+"js/"+({0:"chunk-common"}[e]||e)+"."+{0:"9c0d12bb",3:"e7cd74ee",4:"9c9f637e",5:"7b5f0b0c",6:"5924181a",7:"3c3ebb60",8:"62740e5c",9:"14636656",10:"980a27b9",11:"ddcced5a",12:"7699ddfc",13:"a66443ab",14:"d21d3d23",15:"45c98b89",16:"78baaa48",17:"aebe721c",18:"e094158f"}[e]+".js"}function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={0:1,3:1,4:1,5:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise((function(t,n){for(var a="css/"+({0:"chunk-common"}[e]||e)+"."+{0:"a9f14dc0",3:"02daecaf",4:"fc417d7f",5:"02daecaf",6:"31d6cfe0",7:"31d6cfe0",8:"31d6cfe0",9:"31d6cfe0",10:"31d6cfe0",11:"31d6cfe0",12:"31d6cfe0",13:"31d6cfe0",14:"31d6cfe0",15:"31d6cfe0",16:"31d6cfe0",17:"31d6cfe0",18:"31d6cfe0"}[e]+".css",r=c.p+a,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var l=s[i],d=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(d===a||d===r))return t()}var u=document.getElementsByTagName("style");for(i=0;i<u.length;i++){l=u[i],d=l.getAttribute("data-href");if(d===a||d===r)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var a=t&&t.target&&t.target.src||r,s=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=a,delete o[e],m.parentNode.removeChild(m),n(s)},m.href=r;var p=document.getElementsByTagName("head")[0];p.appendChild(m)})).then((function(){o[e]=0})));var a=r[e];if(0!==a)if(a)t.push(a[2]);else{var s=new Promise((function(t,n){a=r[e]=[t,n]}));t.push(a[2]=s);var l,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=i(e);var u=new Error;l=function(t){d.onerror=d.onload=null,clearTimeout(m);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,n[1](u)}r[e]=void 0}};var m=setTimeout((function(){l({type:"timeout",target:d})}),12e4);d.onerror=d.onload=l,document.head.appendChild(d)}return Promise.all(t)},c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var m=d;s.push([0,1]),n()})({0:function(e,t,n){e.exports=n("2f39")},"2f39":function(e,t,n){"use strict";n.r(t);n("5319"),n("7d6e"),n("e54f"),n("985d"),n("31cd");var a=n("2b0e"),o=n("1f91"),r=n("42d2"),s=n("b178");a["a"].use(s["b"],{config:{},lang:o["a"],iconSet:r["a"]});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"q-app"}},[n("router-view"),n("Loader",{attrs:{loadingState:e.loadingState}}),n("ServerAnswerModal",{attrs:{modalText:e.serverAnswerData.message,status:e.serverAnswerData.isOpened}})],1)},c=[],l=n("2f62"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-inner-loading",{attrs:{showing:this.$props.loadingState}},[n("q-spinner-gears",{attrs:{size:"50px",color:"primary"}})],1)},u=[],m={name:"Loader",props:{loadingState:{type:Boolean,default:!0}}},p=m,f=(n("f488"),n("2877")),h=Object(f["a"])(p,d,u,!1,null,null,null),E=h.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-dialog",{attrs:{persistent:""},model:{value:e.isOpened,callback:function(t){e.isOpened=t},expression:"isOpened"}},[n("q-card",[n("q-card-section",{staticClass:"row items-center"},[n("span",{staticClass:"q-ml-sm"},[e._v(e._s(this.$props.modalText))])]),n("q-card-actions",{attrs:{align:"right"}},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Ок",color:"primary"},on:{click:function(t){return e.resetModalState()}}})],1)],1)],1)},T=[],S={props:{status:{type:Boolean},modalText:{type:String},serverAnswerStatus:{type:Number}},data(){return{isOpened:!1,text:""}},methods:{...Object(l["b"])("common",["SET_SERVER_ANSWER_MODAL"]),resetModalState(){this.SET_SERVER_ANSWER_MODAL({msg:"",isOpened:!1})}},watch:{status:function(e,t){this.isOpened=e},modalText:function(e,t){this.text=e}}},g=S,A=Object(f["a"])(g,_,T,!1,null,null,null),L=A.exports,b={name:"App",components:{Loader:E,ServerAnswerModal:L},methods:{...Object(l["b"])("init",["INIT_APP"]),initApp(){this.INIT_APP()}},computed:{...Object(l["c"])("common",["loadingState","serverAnswerData"])},created(){this.initApp()}},v=b,N=Object(f["a"])(v,i,c,!1,null,null,null),O=N.exports,k=n("bc3a"),I=n.n(k),y=n("4328"),R=n.n(y);const w=I.a.create({paramsSerializer:e=>R.a.stringify(e,{arrayFormat:"repeat"}),baseURL:"http://89.223.66.137"});a["a"].prototype.$axios=w;const D={CHANGE_LOADING_STATE({commit:e},t){e("SET_LOADING_STATE",t)},SET_SERVER_ANSWER_MODAL({commit:e},t){e("FILL_SERVER_ANSWER_STATE",t)}},G={SET_LOADING_STATE(e,t){e.isLoading=t},FILL_SERVER_ANSWER_STATE(e,t){e.serverAnswer={message:t.message,isOpened:t.isOpened}}},P={isLoading:!0,serverAnswer:{message:"",isOpened:!1}},C={loadingState:e=>e.isLoading,serverAnswerData:e=>e.serverAnswer};var j={namespaced:!0,actions:D,mutations:G,state:P,getters:C};n("a79d");const U={INIT_APP({commit:e,dispatch:t}){t("common/CHANGE_LOADING_STATE",!0,{root:!0}),t("user/AUTHENTICATION",{},{root:!0}),t("department/GET_DEPARTMENT_LIST",{},{root:!0}),t("user/GET_USER_LIST",{},{root:!0}),w.get("/init/init_app").then((e=>{console.log(e.data)})).catch((e=>console.log(e))).finally((()=>{t("common/CHANGE_LOADING_STATE",!1,{root:!0})}))},CHANGE_LOADING_STATE({commit:e},t){e("SET_LOADING_STATE",t)}},x={},M={},H={};var V={namespaced:!0,actions:U,mutations:x,state:M,getters:H};const q={},W={},F={},$={};var K={namespaced:!0,state:q,mutations:W,actions:F,getters:$};const z={userList:[],activeUser:{}},B={SET_ACTIVE_USER(e,t){e.activeUser=t},SET_USER_LIST(e,t){e.userList=t}},J={LOGIN({commit:e,dispatch:t},n){w.post("user/login",n).then((n=>{localStorage.setItem("token",n.data.token),t("GET_USER_LIST"),e("SET_ACTIVE_USER",n.data.user)})).then((e=>{this.$router.push("/")})).catch((e=>console.log(e)))},LOGOUT({commit:e}){delete w.defaults.headers.common["Authorization"],localStorage.removeItem("token"),e("SET_ACTIVE_USER",{}),this.$router.push("/login")},AUTHENTICATION({commit:e,dispatch:t}){w.defaults.headers.common["Authorization"]=localStorage.getItem("token"),w.get("/auth/auth").then((n=>{console.log("auth ok"),e("SET_ACTIVE_USER",n.data.user),t("REFRESH_TOKEN",n.data.token)})).catch((e=>{console.log("auth not"),localStorage.removeItem("token"),this.$router.push("/login")}))},REFRESH_TOKEN({dispatch:e},t){localStorage.setItem("token",t),setTimeout((()=>{e("USER_AUTHENTICATION")}),144e5)},CREATE_USER({commit:e,dispatch:t},n){t("common/CHANGE_LOADING_STATE",!0,{root:!0}),w.post("user/add_user",n).then((e=>{t("GET_USER_LIST")})).catch((e=>console.log(e))).finally((()=>{t("common/CHANGE_LOADING_STATE",!1,{root:!0})}))},GET_USER_LIST({commit:e}){w.get("user/get_users").then((t=>{e("SET_USER_LIST",t.data)})).catch((e=>console.log(e)))}},Q={userList:e=>e.userList,activeUser:e=>e.activeUser,currentOrdinalNumber:e=>e.userList.length?e.userList[e.userList.length-1].ordinalNumber+1:null,roles:e=>e.activeUser?e.activeUser.roles:null};var X={namespaced:!0,state:z,mutations:B,actions:J,getters:Q};function Y(e,t,n){e.forEach((e=>{t.forEach((t=>{e._id===t._id&&(e[n]=t[n])}))}))}const Z={departmentList:[]},ee={SET_DEPARTMENTS_LIST(e,t){e.departmentList=t}},te={GET_DEPARTMENT_LIST({commit:e}){w.get("departments/get_departments").then((t=>{e("SET_DEPARTMENTS_LIST",t.data.departments)})).catch((e=>console.log(e)))},CREATE_DEPARTMENT({commit:e,dispatch:t},n){t("common/CHANGE_LOADING_STATE",!0,{root:!0}),w.post("departments/create_department",n).then((e=>{t("GET_DEPARTMENT_LIST"),console.log("ok",e),t("common/SET_SERVER_ANSWER_MODAL",{message:e.data.message,isOpened:!0},{root:!0})})).catch((e=>{console.log("err",e),t("common/SET_SERVER_ANSWER_MODAL",{message:e.response.data.message,isOpened:!0},{root:!0})})).finally((()=>{t("common/CHANGE_LOADING_STATE",!1,{root:!0})}))}},ne={departmentList:(e,{},t)=>{let n=t.user.userList,a=t.task.taskList;return e.departmentList.forEach((e=>{e.members&&Y(e.members,n,"fullName"),e.heads&&Y(e.heads,n,"fullName"),e.tasks&&Y(e.tasks,a,"title")})),e.departmentList}};var ae={namespaced:!0,state:Z,mutations:ee,actions:te,getters:ne};const oe=[{id:"1",title:"AМ на большевиков",description:"Делаем большой магазин под ключ",projectGroup:{id:"1",name:"АМ"},tasks:[{id:"1",id:"2"}],members:[{id:"2"},{id:"3"}],master:{id:"2"},created:{by:{id:"2"},date:new Date},exp:new Date,priority:7,status:"inWork"},{id:"2",title:"ЛекОптТорг на петроградке",description:"Вешаем вывеску и делаем интерьер",projectGroup:{id:"2",name:"ЛекОптТорг"},tasks:[{id:"3",id:"5"}],members:[{id:"1"},{id:"3"}],master:{id:"3"},created:{by:{id:"1"},date:new Date},exp:new Date,priority:7,status:"isDone"}],re={projectList:[]},se={SET_PROJECT_LIST(e,t){e.projectList=t}},ie={GET_PROJECT_LIST({commit:e}){e("SET_PROJECT_LIST",oe)}},ce={projectList:(e,{},t)=>{function n(e,t,n){e.forEach((e=>{t.forEach((t=>{e.id===t.id&&(e[n]=t[n])}))}))}let a=t.task.taskList,o=t.user.userList;return e.projectList.forEach((e=>{n(e.tasks,a,"title"),n(e.members,o,"fullName"),e.master.fullName=o.find((t=>t.id===e.master.id)).fullName,e.created.by.fullName=o.find((t=>t.id===e.created.by.id)).fullName,e.statusDesc="isOpened"===e.status?"Открытая задача":"inWork"===e.status?"В работе":"isFrozen"===e.status?"Приостановлена":"isDone"===e.status?"Выполнена":"isClosed"===e.status?"Закрыта":null})),e.projectList}};var le={namespaced:!0,state:re,mutations:se,actions:ie,getters:ce};const de={taskList:[]},ue={FILL_TASK_LIST(e,t){e.taskList=t}},me={GET_TASK_LIST({commit:e}){w.get("task/get_tasks").then((t=>{e("FILL_TASK_LIST",t.data)})).catch((e=>console.log(e)))},CREATE_TASK({commit:e,dispatch:t},n){t("common/CHANGE_LOADING_STATE",!0,{root:!0}),w.post("task/add_task",n).then((e=>{t("GET_TASK_LIST")})).catch((e=>console.log(e))).finally((()=>{t("common/CHANGE_LOADING_STATE",!1,{root:!0})}))}},pe={taskList:(e,{},t)=>{const n=t.user.userList;return e.taskList.forEach((e=>{e.members&&Y(e.members,n,"fullName"),e.performers&&Y(e.performers,n,"fullName"),e.master&&(e.master.fullName=n.find((t=>t._id===e.master._id)).fullName)})),e.taskList},activeUserTasks:(e,{},t)=>{let n=t.user.activeUser;return e.taskList.filter((e=>e.members?e.members.find((e=>e._id===n._id)):null))},openedTasks:e=>e.taskList.filter((e=>"isOpened"===e.status)),closedTasks:e=>e.taskList.filter((e=>"isClosed"===e.status)),frozenTasks:e=>e.taskList.filter((e=>"isFrozen"===e.status)),doneTasks:e=>e.taskList.filter((e=>"isDone"===e.status)),inWorkTasks:e=>e.taskList.filter((e=>"inWork"===e.status))};var fe={namespaced:!0,state:de,mutations:ue,actions:me,getters:pe};a["a"].use(l["a"]);const he=new l["a"].Store({modules:{common:j,init:V,auth:K,user:X,department:ae,project:le,task:fe},strict:!1});var Ee=function(){return he},_e=n("8c4f");n("ddb0");const Te=[{path:"/",component:()=>n.e(7).then(n.bind(null,"713b")),children:[{path:"",component:()=>Promise.all([n.e(0),n.e(5)]).then(n.bind(null,"3635"))},{path:"/all_tasks",component:()=>Promise.all([n.e(0),n.e(18)]).then(n.bind(null,"eeea"))},{path:"/task/:id",component:()=>Promise.all([n.e(0),n.e(4)]).then(n.bind(null,"7c3b"))},{path:"/opened_tasks",component:()=>Promise.all([n.e(0),n.e(17)]).then(n.bind(null,"3709"))},{path:"/archived_tasks",component:()=>n.e(15).then(n.bind(null,"260b"))},{path:"/done_tasks",component:()=>Promise.all([n.e(0),n.e(3)]).then(n.bind(null,"eb52"))},{path:"/create_user",component:()=>n.e(11).then(n.bind(null,"fd78"))},{path:"/users",component:()=>n.e(14).then(n.bind(null,"edf7"))},{path:"/departments",component:()=>n.e(13).then(n.bind(null,"a90d"))},{path:"/create_department",component:()=>Promise.all([n.e(0),n.e(10)]).then(n.bind(null,"9687"))},{path:"/department/:id",component:()=>Promise.all([n.e(0),n.e(12)]).then(n.bind(null,"fa2a"))},{path:"/create_task",component:()=>Promise.all([n.e(1),n.e(0),n.e(8)]).then(n.bind(null,"9379"))}]},{path:"/",component:()=>n.e(6).then(n.bind(null,"21f0")),children:[{path:"/login",name:"login",component:()=>n.e(16).then(n.bind(null,"d37f"))}]},{path:"*",component:()=>n.e(9).then(n.bind(null,"e51e"))}];var Se=Te;a["a"].use(_e["a"]);var ge=function(){const e=new _e["a"]({scrollBehavior:()=>({x:0,y:0}),routes:Se,mode:"hash",base:""});return e},Ae=async function(){const e="function"===typeof Ee?await Ee({Vue:a["a"]}):Ee,t="function"===typeof ge?await ge({Vue:a["a"],store:e}):ge;e.$router=t;const n={router:t,store:e,render:e=>e(O),el:"#q-app"};return{app:n,store:e,router:t}};const Le="";async function be(){const{app:e,store:t,router:n}=await Ae();let o=!1;const r=e=>{o=!0;const t=Object(e)===e?n.resolve(e).route.fullPath:e;window.location.href=t},s=window.location.href.replace(window.location.origin,""),i=[void 0];for(let l=0;!1===o&&l<i.length;l++)if("function"===typeof i[l])try{await i[l]({app:e,router:n,store:t,Vue:a["a"],ssrContext:null,redirect:r,urlPath:s,publicPath:Le})}catch(c){return c&&c.url?void(window.location.href=c.url):void console.error("[Quasar] boot error:",c)}!0!==o&&new a["a"](e)}be()},"31cd":function(e,t,n){},"976f":function(e,t,n){},f488:function(e,t,n){"use strict";n("976f")}});