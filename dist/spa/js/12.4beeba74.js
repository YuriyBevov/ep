(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{fa2a:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"department-info"},[this.currentDepartment?r("div",{},[r("q-list",{staticClass:"q-mb-md",attrs:{bordered:"",separator:""}},[r("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[r("q-item-section",[r("q-item-label",{attrs:{overline:""}},[e._v("Название:")]),r("q-item-label",{staticClass:"text-orange-9"},[e._v(e._s(this.currentDepartment.title))])],1)],1),r("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[r("q-item-section",[r("q-item-label",{attrs:{overline:""}},[e._v("Руководители:")]),r("q-item-label",e._l(this.currentDepartment.heads,(function(t,i){return r("span",{key:"head_i"+i},[e._v("\n                            "+e._s(t.fullName)+" "),i!==e.currentDepartment.heads.length-1?r("span",[e._v(",")]):e._e()])})),0)],1)],1),r("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[r("q-item-section",[r("q-item-label",{attrs:{overline:""}},[e._v("Состав:")]),r("q-item-label",e._l(this.currentDepartment.members,(function(t,i){return r("span",{key:"member_i"+i},[e._v(" \n                            "+e._s(t.fullName)+" "),i!==e.currentDepartment.members.length-1?r("span",[e._v(",")]):e._e()])})),0)],1)],1),r("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[r("div",[r("ShortTaskCard",{attrs:{title:"Текущие задачи",emptyText:"Задач пока нет...",color:"#1976D2",tasks:this.currentDepartment.tasks?this.currentDepartment.tasks:[]},on:{openTask:e.onClickOpenTask}})],1)])],1),r("div",[r("q-btn",{staticClass:"q-mr-md",attrs:{label:"Редактировать состав",color:"secondary"},on:{click:function(t){e.isMemberSelectionOpened=!0}}}),r("q-btn",{attrs:{label:"Удалить отдел",color:"negative"},on:{click:function(t){return e.deleteDepartment()}}})],1),r("q-dialog",{attrs:{"transition-show":"fade","transition-hide":"fade","full-width":""},model:{value:e.isMemberSelectionOpened,callback:function(t){e.isMemberSelectionOpened=t},expression:"isMemberSelectionOpened"}},[r("q-card",{staticClass:"flex column no-wrap q-pa-lg",staticStyle:{height:"50vh"}},[r("UserSelection",{attrs:{type:"department_update",users:this.userList,department:this.currentDepartment.title},on:{memberList:e.fillMemberList}})],1)],1)],1):e._e()])},a=[],s=r("2f62"),n=r("0322"),l=r("d21d"),m={components:{ShortTaskCard:n["a"],UserSelection:l["a"]},data(){return{currentDepartment:{},isMemberSelectionOpened:!1}},computed:{...Object(s["c"])("department",["departmentList"]),...Object(s["c"])("user",["userList"])},methods:{...Object(s["b"])("department",["DELETE_DEPARTMENT","UPDATE_DEPARTMENT"]),fillMemberList(e){let t=[];e.forEach((e=>{e.isMember&&e.isHead?t.push({_id:e._id,isHead:!0}):e.isMember&&t.push({_id:e._id,isHead:!1})}));let r={_id:this.currentDepartment._id,title:this.currentDepartment.title,memberList:t};this.UPDATE_DEPARTMENT(r),this.isMemberSelectionOpened=!1},setDepartmentInfo(){this.departmentList&&(this.currentDepartment=this.departmentList.find((e=>e._id===this.$route.params.id)))},onClickOpenTask(e){this.$router.push("/task/"+e)},deleteDepartment(e,t){this.DELETE_DEPARTMENT(this.currentDepartment)}},mounted(){this.setDepartmentInfo()},watch:{departmentList:function(){this.setDepartmentInfo()}}},c=m,p=r("2877"),o=Object(p["a"])(c,i,a,!1,null,null,null);t["default"]=o.exports}}]);